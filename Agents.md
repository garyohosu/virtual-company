# Agents.md - Virtual Company Agent Instructions

## ğŸ¯ Core Philosophy: GitHub-Driven Automation

### The Basic Concept

All AI CLI agents operate under a **single, unified principle**:

```
User writes task to GitHub
    â†“
Each CLI reads its instruction file from GitHub
    â†“
Each CLI executes on Sakura server automatically
    â†“
Each CLI outputs human-readable results (RESULT.md)
    â†“
Each CLI commits and pushes to GitHub
    â†“
User sees results on GitHub
```

**Key Points**:
- **No manual copy-paste**: CLI agents read instructions from GitHub URLs
- **No user intervention**: Once started, agents run to completion
- **No context loss**: All information stored in GitHub, persistent across sessions
- **Automated reporting**: Results in easy-to-read RESULT.md files

---

## How Each Agent Works

### Reading Instructions from GitHub

Each agent reads its instruction file directly from GitHub:

| Agent | Instruction File | Raw URL |
|-------|-----------------|---------|
| **Codex CLI** | order_codex.md | `https://raw.githubusercontent.com/garyohosu/virtual-company/main/order_codex.md` |
| **Gemini CLI** | order_gemini.md | `https://raw.githubusercontent.com/garyohosu/virtual-company/main/order_gemini.md` |
| **Claude Code** | order_claude.md | `https://raw.githubusercontent.com/garyohosu/virtual-company/main/order_claude.md` |
| **Genspark** | order_genspark.md | `https://raw.githubusercontent.com/garyohosu/virtual-company/main/order_genspark.md` |

### Execution Pattern (Same for All Agents)

```bash
1. SSH into Sakura server (garyo@garyo.sakura.ne.jp)
2. Clone/update virtual-company repository
3. Read tasks/CURRENT_TASK.md to understand what to do
4. Read results from previous agents (if any)
5. Execute your task
6. Create RESULT.md (human-readable output)
7. Create EXECUTION_LOG.md (technical details)
8. Update changelog.md
9. git add / commit / push
```

---

## Output Files (Same Structure for All Agents)

Each agent creates the same type of output files in `results/[agent-name]/`:

### ğŸ“– RESULT.md (What the User Reads)

**Purpose**: Human-readable summary of what was done and what was produced

**Format**:
```markdown
# âœ… [Agent] Execution Result

**Task**: [Name]
**Date**: [ISO timestamp]
**Status**: âœ… SUCCESS

## Summary
[1-2 sentences describing what was done]

## Output Files
- [file1]: [description]
- [file2]: [description]

## What Was Produced
[Bullet list of outputs]

## Checklist
- âœ… Requirement 1
- âœ… Requirement 2

## Next Steps
ğŸ‘‰ [Next agent name] will now...

---
Generated by: [Agent Name]
```

**Key Rule**: This file is for humans, not machines. Make it easy to read and understand.

---

### ğŸ“‹ EXECUTION_LOG.md (Technical Details)

**Purpose**: Detailed technical log for debugging and verification

**Contains**:
- Input processing
- Execution steps taken
- Issues encountered
- Validation results
- Output files created

---

### ğŸ“ changelog.md Updates

**Format**:
```markdown
## [YYYY-MM-DD] - [Agent Name]

**Task**: [Task ID]
**Changes**: [What was done]
**Files Modified**: [List]
**Status**: COMPLETE / PARTIAL / BLOCKED
**ğŸ“– View Result**: `results/[agent]/RESULT.md`
**Next Agent**: [Next agent name]
**Notes**: [Key findings]
```

---

## Communication Between Agents

### Sequential Execution

Agents read the previous agent's outputs:

```
Codex
  â†“ writes results/codex/RESULT.md
  â†“
Gemini reads results/codex/RESULT.md + EXECUTION_LOG.md
  â†“ writes results/gemini/RESULT.md
  â†“
Claude reads both previous results
  â†“ writes results/claude/RESULT.md
  â†“
Genspark reads all previous results
  â†“ writes results/genspark/RESULT.md
```

### Accessing Previous Outputs

```bash
# In Sakura server
cd ~/virtual-company

# Read what Codex did
cat results/codex/RESULT.md

# Read what Gemini analyzed
cat results/gemini/RESULT.md

# Read technical details
cat results/gemini/EXECUTION_LOG.md
```

---

## ğŸ”„ Complete Workflow Example

### Morning: User Creates Task

Using Claude.ai with GitHub MCP:
```
Create/edit tasks/CURRENT_TASK.md
git push to main
```

### Mid-Day: User Starts Agents

Windows Command Prompt:
```cmd
virtual_company_execute.bat
```

### Agents Automatically Execute

**Codex CLI** (reads from GitHub, auto-executes):
1. Reads: https://raw.githubusercontent.com/garyohosu/virtual-company/main/order_codex.md
2. Executes on Sakura server
3. Outputs: RESULT.md + EXECUTION_LOG.md
4. Commits and pushes

**Gemini CLI** (reads what Codex created):
1. Reads: order_gemini.md from GitHub
2. Reviews Codex's RESULT.md and EXECUTION_LOG.md
3. Executes analysis
4. Outputs: RESULT.md + ANALYSIS.md + EXECUTION_LOG.md
5. Commits and pushes

**Claude Code** (orchestrator):
1. Reads: order_claude.md from GitHub
2. Reviews both previous agents' outputs
3. Makes integration decisions
4. Outputs: RESULT.md + INTEGRATION_SUMMARY.md + EXECUTION_LOG.md
5. Commits and pushes

**Genspark** (QA/testing):
1. Reads: order_genspark.md from GitHub
2. Tests everything
3. Outputs: RESULT.md + TESTING_REPORT.md + EXECUTION_LOG.md
4. Commits and pushes

### Evening: User Reviews Results

On GitHub, in numeric order:
1. `results/codex/RESULT.md` - What code was generated
2. `results/gemini/RESULT.md` - What risks were found
3. `results/claude/RESULT.md` - What was approved
4. `results/genspark/RESULT.md` - What tests passed
5. `changelog.md` - Overall progress

---

## Key Rules for All Agents

### âœ… DO:

- Read instruction file from GitHub
- Follow the specification exactly
- Create RESULT.md in human-readable format
- Log everything in EXECUTION_LOG.md
- Validate your output before committing
- Commit with clear, descriptive messages
- Push all changes to main

### âŒ DON'T:

- Assume context - always read from GitHub
- Skip error handling
- Leave sensitive data in outputs
- Forget to update changelog.md
- Commit incomplete work
- Hardcode values
- Leave TODO comments

---

## GitHub Integration

### Repository Structure

```
virtual-company/
â”œâ”€â”€ tasks/
â”‚   â””â”€â”€ CURRENT_TASK.md          â† User puts task here
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ codex/
â”‚   â”‚   â”œâ”€â”€ RESULT.md            â† Human reads this
â”‚   â”‚   â”œâ”€â”€ EXECUTION_LOG.md     â† Technical details
â”‚   â”‚   â””â”€â”€ [generated files]
â”‚   â”œâ”€â”€ gemini/
â”‚   â”‚   â”œâ”€â”€ RESULT.md
â”‚   â”‚   â”œâ”€â”€ ANALYSIS.md
â”‚   â”‚   â””â”€â”€ EXECUTION_LOG.md
â”‚   â”œâ”€â”€ claude/
â”‚   â”‚   â”œâ”€â”€ RESULT.md
â”‚   â”‚   â”œâ”€â”€ INTEGRATION_SUMMARY.md
â”‚   â”‚   â””â”€â”€ EXECUTION_LOG.md
â”‚   â””â”€â”€ genspark/
â”‚       â”œâ”€â”€ RESULT.md
â”‚       â”œâ”€â”€ TESTING_REPORT.md
â”‚       â””â”€â”€ EXECUTION_LOG.md
â”œâ”€â”€ order_codex.md               â† Codex reads this
â”œâ”€â”€ order_gemini.md              â† Gemini reads this
â”œâ”€â”€ order_claude.md              â† Claude reads this
â”œâ”€â”€ order_genspark.md            â† Genspark reads this
â”œâ”€â”€ changelog.md                 â† All agents update this
â””â”€â”€ .gitignore                   â† Security rules
```

---

## Environment Details

- **Server**: garyo.sakura.ne.jp
- **User**: garyo
- **Repository**: https://github.com/garyohosu/virtual-company
- **Local**: Windows 11 (DOS/Command Prompt + WSL2 available)

---

## Success Definition

A task is **COMPLETE** when:

```
âœ… CURRENT_TASK.md is understood
âœ… Codex generates code with RESULT.md output
âœ… Gemini analyzes code with RESULT.md output
âœ… Claude reviews and approves with RESULT.md output
âœ… Genspark tests and validates with RESULT.md output
âœ… All RESULT.md files are human-readable
âœ… All changes are committed and pushed
âœ… changelog.md is updated
âœ… User can view results/*/RESULT.md to see what happened
```

---

## Universal Agent Requirements

### Before Starting Any Task

1. Read `order_[agent].md` from GitHub
2. Understand the current task from `tasks/CURRENT_TASK.md`
3. Review all previous agents' RESULT.md files
4. Check `.gitignore` for security rules
5. Verify SSH access to Sakura server works

### During Execution

1. Follow specification completely
2. Handle all edge cases
3. Add error handling
4. Document your work
5. Validate outputs before commit

### After Execution

1. Create RESULT.md (human-readable)
2. Create EXECUTION_LOG.md (technical)
3. Update changelog.md (progress tracking)
4. Commit with clear message
5. Push to main branch

### If Issues Occur

1. Document in EXECUTION_LOG.md
2. Flag as "BLOCKED" or "PARTIAL" in RESULT.md
3. Mark in changelog.md
4. Still commit and push (so humans can see what happened)

---

## Version History

- **v1.0** (2025-01-30): Initial framework created
- **v1.1** (2025-01-30): Added RESULT.md for easy human reading
- **v1.2** (2025-01-30): Added Core Philosophy section

---

**Last Updated**: 2025-01-30  
**Maintained By**: Claude AI (via GitHub MCP)  
**Status**: Active - Ready for production use
